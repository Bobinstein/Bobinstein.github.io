<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ardrive-core-js | Ar.io</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/docs/assets/css/0.styles.12376292.css" as="style"><link rel="preload" href="/docs/assets/js/app.feaa425f.js" as="script"><link rel="preload" href="/docs/assets/js/2.c7be3cb1.js" as="script"><link rel="preload" href="/docs/assets/js/6.c24b6de0.js" as="script"><link rel="preload" href="/docs/assets/js/14.77d02ff2.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.a2c1c780.js"><link rel="prefetch" href="/docs/assets/js/11.fe4f765d.js"><link rel="prefetch" href="/docs/assets/js/12.2a97a669.js"><link rel="prefetch" href="/docs/assets/js/13.21b4e75b.js"><link rel="prefetch" href="/docs/assets/js/15.66c02c46.js"><link rel="prefetch" href="/docs/assets/js/16.f1fa93c4.js"><link rel="prefetch" href="/docs/assets/js/17.45dea861.js"><link rel="prefetch" href="/docs/assets/js/18.1922a11c.js"><link rel="prefetch" href="/docs/assets/js/19.3efa0045.js"><link rel="prefetch" href="/docs/assets/js/20.f445c64c.js"><link rel="prefetch" href="/docs/assets/js/21.f027c227.js"><link rel="prefetch" href="/docs/assets/js/22.79d0c25e.js"><link rel="prefetch" href="/docs/assets/js/23.39debd60.js"><link rel="prefetch" href="/docs/assets/js/24.d58c7827.js"><link rel="prefetch" href="/docs/assets/js/25.a2009062.js"><link rel="prefetch" href="/docs/assets/js/26.90c7915b.js"><link rel="prefetch" href="/docs/assets/js/27.e701a089.js"><link rel="prefetch" href="/docs/assets/js/28.5cec05e1.js"><link rel="prefetch" href="/docs/assets/js/29.f453f1b1.js"><link rel="prefetch" href="/docs/assets/js/3.61494215.js"><link rel="prefetch" href="/docs/assets/js/4.c831aece.js"><link rel="prefetch" href="/docs/assets/js/5.55f8bed9.js"><link rel="prefetch" href="/docs/assets/js/7.9f5f0766.js"><link rel="prefetch" href="/docs/assets/js/8.5383fefc.js"><link rel="prefetch" href="/docs/assets/js/9.151c3f22.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.12376292.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/images/elephant-light.png" alt="Ar.io" class="logo"> <span class="site-name can-hide">Ar.io</span></a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Concepts" class="dropdown-title"><span class="title">Concepts</span> <span class="arrow down"></span></button> <button type="button" aria-label="Concepts" class="mobile-dropdown-title"><span class="title">Concepts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/concepts/overview.html" class="nav-link">
  Overview
</a></li><li class="dropdown-item"><!----> <a href="/docs/concepts/glossary.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="https://youtu.be/dQw4w9WgXcQ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  White Paper
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="docs" class="dropdown-title"><span class="title">docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="docs" class="mobile-dropdown-title"><span class="title">docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Ardrive
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/docs/ardrive/ardrive-cli.html" class="nav-link">
  CLI
</a></li><li class="dropdown-subitem"><a href="/docs/docs/ardrive/ardrive-core.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Core SDK
</a></li></ul></li><li class="dropdown-item"><h4>
          ar.io
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/docs/ar-io/placeholder.html" class="nav-link">
  Placeholder
</a></li><li class="dropdown-subitem"><a href="/docs/docs/ar-io/need-to-add.html" class="nav-link">
  Need to add stuff
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tutorials" class="dropdown-title"><span class="title">Tutorials</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tutorials" class="mobile-dropdown-title"><span class="title">Tutorials</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/tutorials/filler.html" class="nav-link">
  filler
</a></li><li class="dropdown-item"><!----> <a href="/docs/tutorials/placeholder.html" class="nav-link">
  placeholder
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standards" class="dropdown-title"><span class="title">Standards</span> <span class="arrow down"></span></button> <button type="button" aria-label="Standards" class="mobile-dropdown-title"><span class="title">Standards</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/standards/maybe-later.html" class="nav-link">
  maybe-later
</a></li><li class="dropdown-item"><!----> <a href="/docs/standards/nothing-here.html" class="nav-link">
  nothing here
</a></li></ul></div></div> <!----></nav> <div class="links"><a href="/support" class="nav-link-right">Support</a> <a href="https://discord.gg/7zUPfN4D6g" class="nav-link-right">Discord</a> <a href="https://github.com/ardriveapp" class="nav-link-right"><img src="/docs/images/Github.svg" class="github"></a> <img src="/docs/images/eva-sun.svg" class="theme-toggle"> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Concepts" class="dropdown-title"><span class="title">Concepts</span> <span class="arrow down"></span></button> <button type="button" aria-label="Concepts" class="mobile-dropdown-title"><span class="title">Concepts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/concepts/overview.html" class="nav-link">
  Overview
</a></li><li class="dropdown-item"><!----> <a href="/docs/concepts/glossary.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="https://youtu.be/dQw4w9WgXcQ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  White Paper
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="docs" class="dropdown-title"><span class="title">docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="docs" class="mobile-dropdown-title"><span class="title">docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Ardrive
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/docs/ardrive/ardrive-cli.html" class="nav-link">
  CLI
</a></li><li class="dropdown-subitem"><a href="/docs/docs/ardrive/ardrive-core.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Core SDK
</a></li></ul></li><li class="dropdown-item"><h4>
          ar.io
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/docs/ar-io/placeholder.html" class="nav-link">
  Placeholder
</a></li><li class="dropdown-subitem"><a href="/docs/docs/ar-io/need-to-add.html" class="nav-link">
  Need to add stuff
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tutorials" class="dropdown-title"><span class="title">Tutorials</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tutorials" class="mobile-dropdown-title"><span class="title">Tutorials</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/tutorials/filler.html" class="nav-link">
  filler
</a></li><li class="dropdown-item"><!----> <a href="/docs/tutorials/placeholder.html" class="nav-link">
  placeholder
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standards" class="dropdown-title"><span class="title">Standards</span> <span class="arrow down"></span></button> <button type="button" aria-label="Standards" class="mobile-dropdown-title"><span class="title">Standards</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/standards/maybe-later.html" class="nav-link">
  maybe-later
</a></li><li class="dropdown-item"><!----> <a href="/docs/standards/nothing-here.html" class="nav-link">
  nothing here
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ardrive-core-js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/docs/ardrive/ardrive-core.html#integrating-with-ardrive-core" class="sidebar-link">Integrating with ArDrive Core</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/docs/ardrive/ardrive-core.html#development-environment-setup" class="sidebar-link">Development Environment Setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#recommended-visual-studio-code-extensions" class="sidebar-link">Recommended Visual Studio Code extensions</a></li></ul></li><li><a href="/docs/docs/ardrive/ardrive-core.html#building-the-library" class="sidebar-link">Building the Library</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/docs/ardrive/ardrive-core.html#testing-the-library" class="sidebar-link">Testing the Library</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#coverage" class="sidebar-link">Coverage</a></li><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#adding-tests" class="sidebar-link">Adding tests</a></li><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#using-sinon" class="sidebar-link">Using Sinon</a></li><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#debugging-with-power-assert" class="sidebar-link">Debugging with Power-Assert</a></li><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#progress-logging-of-transaction-uploads" class="sidebar-link">Progress Logging of Transaction Uploads</a></li><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#persistent-caching-of-arfs-entity-metadata" class="sidebar-link">Persistent Caching of ArFS Entity Metadata</a></li><li class="sidebar-sub-header"><a href="/docs/docs/ardrive/ardrive-core.html#applying-custom-metadata-to-arfs-file-transactions" class="sidebar-link">Applying Custom MetaData to ArFS File Transactions</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ardrive-core-js"><a href="#ardrive-core-js" class="header-anchor">#</a> ardrive-core-js</h1> <p>ArDrive Core is a TypeScript library that contains the essential back end application features to support the ArDrive CLI and Desktop apps, such as file management, Permaweb upload/download, wallet management, and other common functions.</p> <p>Engage with the community in <a href="https://discord.gg/7RuTBckX" target="_blank" rel="noopener noreferrer">Discord<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more information.</p> <h2 id="integrating-with-ardrive-core"><a href="#integrating-with-ardrive-core" class="header-anchor">#</a> Integrating with ArDrive Core</h2> <p>To add the ArDrive Core library to your project, simply add it as a dependency:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> ardrive-core-js
</code></pre></div><p>The recommended approach for integrating with ArDrive Core as a dependency in your project is to construct and use the methods provided on the <code>ArDrive</code> class. Developers can use the convenience function <code>arDriveFactory</code> to construct the <code>ArDrive</code> class.</p> <p>Below are a few common examples of interacting with Core:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readJWKFile<span class="token punctuation">,</span> arDriveFactory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ardrive-core-js'</span><span class="token punctuation">;</span>

<span class="token comment">// Read wallet from file</span>
<span class="token keyword">const</span> myWallet <span class="token operator">=</span> <span class="token function">readJWKFile</span><span class="token punctuation">(</span><span class="token string">'/path/to/wallet'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Construct ArDrive class</span>
<span class="token class-name"><span class="token keyword">const</span></span> arDrive <span class="token operator">=</span> <span class="token function">arDriveFactory</span><span class="token punctuation">(</span><span class="token punctuation">{</span> wallet<span class="token operator">:</span> myWallet <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a public drive and its root folder</span>
<span class="token keyword">const</span> createDriveResult <span class="token operator">=</span> <span class="token keyword">await</span> arDrive<span class="token punctuation">.</span><span class="token function">createPublicDrive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> driveName<span class="token operator">:</span> <span class="token string">'My-Drive'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> wrapFileOrFolder<span class="token punctuation">,</span> <span class="token constant">EID</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ardrive-core-js'</span><span class="token punctuation">;</span>

<span class="token comment">// Wrap file for upload</span>
<span class="token keyword">const</span> wrappedEntity <span class="token operator">=</span> <span class="token function">wrapFileOrFolder</span><span class="token punctuation">(</span><span class="token string">'path/to/file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Construct a safe Entity ID Type</span>
<span class="token keyword">const</span> destFolderId <span class="token operator">=</span> <span class="token constant">EID</span><span class="token punctuation">(</span><span class="token string">'10108b54a-eb5e-4134-8ae2-a3946a428ec7'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Upload a public file to destination folder</span>
<span class="token keyword">const</span> uploadFileResult <span class="token operator">=</span> <span class="token keyword">await</span> arDrive<span class="token punctuation">.</span><span class="token function">uploadAllEntities</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    entitiesToUpload<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> wrappedEntity<span class="token punctuation">,</span> destFolderId <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> deriveDriveKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ardrive-core-js'</span><span class="token punctuation">;</span>

<span class="token comment">// Derive a private drive key from password, wallet, and drive ID</span>
<span class="token keyword">const</span> driveKey <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">deriveDriveKey</span><span class="token punctuation">(</span>
    <span class="token string">'mySecretPassWord'</span><span class="token punctuation">,</span>
    <span class="token string">'12345674a-eb5e-4134-8ae2-a3946a428ec7'</span><span class="token punctuation">,</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span>myWallet <span class="token keyword">as</span> JWKWallet<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrivateKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a private folder</span>
<span class="token keyword">const</span> createFolderResult <span class="token operator">=</span> <span class="token keyword">await</span> arDrive<span class="token punctuation">.</span><span class="token function">createPrivateFolder</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    folderName<span class="token operator">:</span> <span class="token string">'My New Private Folder'</span><span class="token punctuation">,</span>
    driveKey<span class="token punctuation">,</span>
    parentFolderId<span class="token operator">:</span> <span class="token constant">EID</span><span class="token punctuation">(</span><span class="token string">'47162534a-eb5e-4134-8ae2-a3946a428ec7'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> wrapFileOrFolder<span class="token punctuation">,</span> EntityKey<span class="token punctuation">,</span> <span class="token constant">EID</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ardrive-core-js'</span><span class="token punctuation">;</span>

<span class="token comment">// Derive a private drive key from raw drive key string</span>
<span class="token keyword">const</span> driveKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntityKey</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'MyAwesomeDriveKeyZZZZZZZZZZZZZZZZZZZZFAKE/s'</span><span class="token punctuation">,</span> <span class="token string">'base64'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wrap folder and all of its contents for upload</span>
<span class="token keyword">const</span> wrappedFolder <span class="token operator">=</span> <span class="token function">wrapFileOrFolder</span><span class="token punctuation">(</span><span class="token string">'path/to/folder'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Upload a private folder and all its contents</span>
<span class="token keyword">const</span> uploadFileResult <span class="token operator">=</span> <span class="token keyword">await</span> arDrive<span class="token punctuation">.</span><span class="token function">uploadAllEntities</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    entitiesToUpload<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            wrappedEntity<span class="token operator">:</span> wrappedFolder<span class="token punctuation">,</span>
            destFolderId<span class="token operator">:</span> <span class="token constant">EID</span><span class="token punctuation">(</span><span class="token string">'76543214a-eb5e-4134-8ae2-a3946a428ec7'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            driveKey
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// And some other public file to a different destination ðŸ¤¯</span>
        <span class="token punctuation">{</span>
          wrappedEntity<span class="token operator">:</span> someOtherWrappedFile
          destFolderId<span class="token operator">:</span> <span class="token constant">EID</span><span class="token punctuation">(</span><span class="token string">'675489321-eb5e-4134-8ae2-a3946a428ec7'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="development-environment-setup"><a href="#development-environment-setup" class="header-anchor">#</a> Development Environment Setup</h2> <p>We use nvm to manage our Node engine version and, if necessary, to install an npm version that we can then use to install Yarn.</p> <p>Note for Windows: <strong>We recommend using WSL</strong> for setting up NVM on Windows using the <a href="https://code.visualstudio.com/docs/remote/wsl" target="_blank" rel="noopener noreferrer">instructions described here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> then continue the steps below.</p> <ol><li><p>Install nvm <a href="https://github.com/nvm-sh/nvm#installing-and-updating" target="_blank" rel="noopener noreferrer">using their instructions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></li> <li><p>Ensure that the correct Node version is installed and activated by performing <code>nvm install</code> and then <code>nvm use</code></p></li> <li><p>We use Yarn 2.x please <a href="https://yarnpkg.com/getting-started/install" target="_blank" rel="noopener noreferrer">follow the installation guidelines here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>We use husky 6.x to manage the git commit hooks that help to improve the quality of our commits. Please run:
<code>yarn husky install</code>
to enable git hooks for this local repository. Without doing so, you risk committing non-compliant code to the repository.</p></li> <li><p>Install all node package dependencies by running <code>yarn install --check-cache</code></p></li></ol> <h3 id="recommended-visual-studio-code-extensions"><a href="#recommended-visual-studio-code-extensions" class="header-anchor">#</a> Recommended Visual Studio Code extensions</h3> <p>To ensure your environment is compatible, we also recommend the following VSCode extensions:</p> <ul><li><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">ES-Lint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig" target="_blank" rel="noopener noreferrer">Editor-Config<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener noreferrer">Prettier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://marketplace.visualstudio.com/items?itemName=arcanis.vscode-zipfs" target="_blank" rel="noopener noreferrer">ZipFS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="building-the-library"><a href="#building-the-library" class="header-anchor">#</a> Building the Library</h2> <p>Simply run <code>yarn build</code>. This will clean the project and compile the TypeScript library.</p> <h2 id="testing-the-library"><a href="#testing-the-library" class="header-anchor">#</a> Testing the Library</h2> <p>This library is setup for <a href="https://github.com/mochajs/mocha" target="_blank" rel="noopener noreferrer">Mocha<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> testing with <a href="https://github.com/chaijs/chai" target="_blank" rel="noopener noreferrer">Chai<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/sinonjs/sinon" target="_blank" rel="noopener noreferrer">Sinon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Configuration for Mocha can be found in <code>.mocharc.js</code></p> <p>To run all of the tests use:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token builtin class-name">test</span>
</code></pre></div><p>To run a specific test, use Mocha's <a href="https://mochajs.org/#-grep-regexp-g-regexp" target="_blank" rel="noopener noreferrer">grep<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> command. This will cause Mocha to only run the tests that contain the provided RegExp.</p> <p>The <code>-g</code> command will <strong>only</strong> match the characters used in the <code>describe()</code> and <code>it()</code> title arguments. It will <strong>not</strong> match files names or folders.</p> <p>For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-g</span> <span class="token string">'My specific unit test'</span>
</code></pre></div><p>Will run this test:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'My specific unit test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'functions correctly'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="coverage"><a href="#coverage" class="header-anchor">#</a> Coverage</h3> <p><a href="https://github.com/istanbuljs/nyc" target="_blank" rel="noopener noreferrer">Istanbul.js (nyc)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> has been added for code coverage reporting. Configuration for the nyc package can be found in <code>nyc.config.js</code></p> <p>On each <code>yarn test</code> command, nyc will output a code coverage summary in the terminal. In addition, a more detailed HTML version will output to the <code>/coverage</code> directory. Simply run <code>/coverage/index.html</code> in your browser to view the HTML version.</p> <p>Alternatively, you can view a verbose coverage output in the terminal by running:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> coverage
</code></pre></div><h3 id="adding-tests"><a href="#adding-tests" class="header-anchor">#</a> Adding tests</h3> <p>There are many different syntax options available with the Chai library, which can be found in their <a href="https://www.chaijs.com/api/bdd/" target="_blank" rel="noopener noreferrer">documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. For examples on unit testing, visit <code>src/example.test.ts</code>, and for integration testing: <code>tests/example.test.ts</code>.</p> <p>Unit tests should be located adjacent (or right next to) the file they are referencing. They should also be named the same with the <code>.test.ts</code> extension. In contrast, integration tests will live in the <code>/tests</code> directory.</p> <p>For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>ardrive-core-js/
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ fileToTest.ts
â”‚   â””â”€â”€ fileToTest.test.ts   <span class="token operator">&lt;</span>-- Unit <span class="token builtin class-name">test</span>
â””â”€â”€ tests
    â””â”€â”€ bestApi.test.ts   <span class="token operator">&lt;</span>----- Integration <span class="token builtin class-name">test</span>
</code></pre></div><h3 id="using-sinon"><a href="#using-sinon" class="header-anchor">#</a> Using Sinon</h3> <p>Sinon can be used to create spies, mocks, fakes, stubs, and more. There are some basic examples of using the library shown in the example test files shared above.</p> <p>For more information on what you can do with Sinon, visit their <a href="https://sinonjs.org/releases/latest" target="_blank" rel="noopener noreferrer">documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="debugging-with-power-assert"><a href="#debugging-with-power-assert" class="header-anchor">#</a> Debugging with Power-Assert</h3> <p><a href="https://github.com/power-assert-js/power-assert" target="_blank" rel="noopener noreferrer">Power-Assert<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is setup as another testing tool. The library can be used to provide a very detailed output of your failing test cases. This can become super useful while debugging a test.</p> <p>To use this tool, it must be imported using this syntax:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> assert <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then use <code>assert</code> in your error throwing test case. Commenting out the Chai assertion will produce a cleaner output:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// expect(failingOutput).to.equal(expectedOutput);</span>
<span class="token function">assert</span><span class="token punctuation">(</span>failingOutput <span class="token operator">===</span> expectedOutput<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>And finally, to view the detailed error messages in your terminal:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> power-assert <span class="token parameter variable">-g</span> <span class="token string">'My test case'</span>
</code></pre></div><h3 id="progress-logging-of-transaction-uploads"><a href="#progress-logging-of-transaction-uploads" class="header-anchor">#</a> Progress Logging of Transaction Uploads</h3> <p>Progress logging of transaction uploads to stderr can be enabled by setting the <code>ARDRIVE_PROGRESS_LOG</code> environment variable to <code>1</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Uploading <span class="token function">file</span> transaction <span class="token number">1</span> of total <span class="token number">2</span> transactions<span class="token punctuation">..</span>.
Transaction _GKQasQX194a364Hph8Oe-oku1AdfHwxWOw9_JC1yjc Upload Progress: <span class="token number">0</span>%
Transaction _GKQasQX194a364Hph8Oe-oku1AdfHwxWOw9_JC1yjc Upload Progress: <span class="token number">35</span>%
Transaction _GKQasQX194a364Hph8Oe-oku1AdfHwxWOw9_JC1yjc Upload Progress: <span class="token number">66</span>%
Transaction _GKQasQX194a364Hph8Oe-oku1AdfHwxWOw9_JC1yjc Upload Progress: <span class="token number">100</span>%
Uploading <span class="token function">file</span> transaction <span class="token number">2</span> of total <span class="token number">2</span> transactions<span class="token punctuation">..</span>.
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">0</span>%
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">13</span>%
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">28</span>%
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">42</span>%
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">60</span>%
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">76</span>%
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">91</span>%
Transaction nA1stCdTkuf290k0qsqvmJ78isEC0bwgrAi3D8Cl1LU Upload Progress: <span class="token number">100</span>%
</code></pre></div><h3 id="persistent-caching-of-arfs-entity-metadata"><a href="#persistent-caching-of-arfs-entity-metadata" class="header-anchor">#</a> Persistent Caching of ArFS Entity Metadata</h3> <p>To avoid redundant requests to the Arweave network for immutable ArFS entity metadata, a persistent file cache is created and maintained at:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Windows: <span class="token operator">&lt;</span>os.homedir<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>/ardrive-caches/metadata
Non-Windows: <span class="token operator">&lt;</span>os.homedir<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>/.ardrive/caches/metadata
</code></pre></div><p>The <code>XDG_CACHE_HOME</code> environment variable is honored, where applicable, and will be used in place of <code>os.homedir()</code> in the scenarios described above.</p> <p>Metadata cache logging to stderr can be enabled by setting the <code>ARDRIVE_CACHE_LOG</code> environment variable to <code>1</code>.</p> <p>Cache performance is UNDEFINED for multi-process scenarios, but is presumed to be generally usable.</p> <p>The cache can be manually cleared safely at any time that any integrating app is not in operation.</p> <h3 id="applying-custom-metadata-to-arfs-file-transactions"><a href="#applying-custom-metadata-to-arfs-file-transactions" class="header-anchor">#</a> Applying Custom MetaData to ArFS File Transactions</h3> <p>Custom metadata can be attached to ArFS File Transactions. Metadata can be applied to either the GQL tags on the MetaData Transaction, the MetaData Transaction's Data JSON, or both.</p> <p>All custom tags can be accessed by using by using <code>ArDrive</code> class read methods such as <code>getPublicFile</code>, <code>getPrivateFile</code>, <code>listPrivateFolder</code>, etc.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> arDrive <span class="token operator">=</span> <span class="token function">arDriveAnonymousFactory</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fileInfo <span class="token operator">=</span> <span class="token keyword">await</span> arDrive<span class="token punctuation">.</span><span class="token function">getPublicFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fileId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> myMetaDataGqlTags <span class="token operator">=</span> fileInfo<span class="token punctuation">.</span>customMetaDataGqlTags<span class="token punctuation">;</span>
<span class="token keyword">const</span> myMetaDataJsonFields <span class="token operator">=</span> fileInfo<span class="token punctuation">.</span>customMetaDataJson<span class="token punctuation">;</span>
</code></pre></div><p>When the custom metadata is attached to the MetaData Transaction's GQL tags, they will become visible on any Arweave GQL gateway and also third party tools that read GQL data.</p> <p>When these tags are added to the MetaData Transaction's Data JSON they can be read by downloading the JSON data directly from <code>https://arweave.net/&lt;metadata tx id&gt;</code>.</p> <p>To add this custom metadata to your file metadata transactions, users can pass an object containing custom tags when wrapping content to upload:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> fileToUpload <span class="token operator">=</span> <span class="token function">wrapFileOrFolder</span><span class="token punctuation">(</span>
    <span class="token string">'path/to/file/on/system'</span><span class="token punctuation">,</span> <span class="token comment">// File or Folder Path</span>
    <span class="token string">'application/custom-content-type'</span><span class="token punctuation">,</span> <span class="token comment">// Custom Content Type</span>
    customMetaData<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// Custom MetaData</span>
        metaDataJson<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'My-Custom-Tag-Name'</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Single-Custom-Value'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        metaDataGqlTags<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token punctuation">[</span><span class="token string">'Another-Custom-Tag'</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'First-Custom-Value'</span><span class="token punctuation">,</span> <span class="token string">'Second-Custom-Value'</span><span class="token punctuation">,</span> <span class="token string">'Third-Custom-Value'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/4/2023, 8:23:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/docs/docs/ardrive/ardrive-cli.html" class="prev">
        ardrive-cli
      </a></span> <!----></p></div> </main></div></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.feaa425f.js" defer></script><script src="/docs/assets/js/2.c7be3cb1.js" defer></script><script src="/docs/assets/js/6.c24b6de0.js" defer></script><script src="/docs/assets/js/14.77d02ff2.js" defer></script>
  </body>
</html>
